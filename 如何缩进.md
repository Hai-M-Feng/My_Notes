

# 如何缩进

---

## 前言

**缩进**，是编写程序的重要组成部分  

有的语言对缩进很严格，比如说 `Python` ，这类语言使用缩进来区分代码块，错误的缩进会导致程序出错  

有的程序不要求严格缩进，比如说 `C / C++` ，它们使用大括号或者分号来区分语句，即使缩进混乱，程序也可以正常运行  

但是，我们仍然应该保持良好的缩进习惯，从长远来看，好的缩进习惯能让你更容易学习其他严格缩进的语言，从当下来看，好的缩进也能让你在编写程序时，让程序结构更加清晰，提高编程的效率  

> 这是一段缩进混乱的代码
> 
> ```cpp
> #include <cstdio>
> #include <iostream>
> #include <cmath>
> using namespace std;
> 
> int numberDigit(int n){
>     int sum,a,b;
> for(a=n;a>0;a/=10)
>     sum++;
>     return sum;}
> int changeNumber(int n){
>     int a=n%10,b=n/10,c,sum=0;//sum要初始化 
>     sum=numberDigit(n);
>     for(int i=1;i<sum;i++)
> a*=10;
> c=a+b;
>     return c;}
> 
> int main(){
>     int x,y,z;
> for(x=18;true;x+=10)
> {y=numberDigit(x);
> z=changeNumber(x);
>         if(z==x*4)
>             {cout<<x;
>             break;}
>                      } 
> }
> return 0;
> }
> ```
> 
> 实际上这个 `return 0;` 已经跑到 `main` 函数外面来了，还多了个大括号，但是混乱的缩进使得出错时不容易看出来  
> 
> 最近看了，有不少同学发过来的代码都是缩进混乱的（尤其是在头歌上面直接编写的，因为头歌的自动缩进支持不是很好），所以写了这个文档  

---

## 1 . 缩进单位

缩进单位通俗来讲就是前面空出来的一格  

通常使用的缩进单位有两种风格，即 `    ` (Tab键) 和 `    ` (四个空格)，时至今日，人们仍然没有讨论出来哪种更好，但实际上他们是差不多的，但是需要注意的是，无论你使用哪种缩进方式，你的程序中 **只能使用其中一种方式**！不要混用  

---

## 2 . 大括号位置

常用的大括号方式有两种：

> **K&R (Kernel Normal Return) 风格**
> 
> ```cpp
> void function(int x) {
>     // 代码
> }
> ```

> **Allman 风格**
> 
> ```cpp
> void function(int x)
> {
>     // 代码
> }
> ```

两种风格的区别在于，K&R 风格的左大括号与控制语句在同一行，而 Allman 风格的做大括号另起了一行，使用哪种风格根据个人喜好决定，但是与缩进单位一样，需要保证一个程序中的风格统一  

然后是右大括号的位置，我们可以发现，无论是哪种风格，右大括号和控制语句都在同一缩进等级，不要把右大括号放在括号内最后一个语句后面，例如

> **错误案例**
> 
> ```cpp
> if(z==x*4)
>     {cout<<x;
>     break;}
> ```
> 
> 可以看到，左大括号应该在控制语句后面或者与控制语句在同一缩进等级  
> 
> 右大括号应该另起一行并且与控制语句在同一缩进等级

---

## 3 . 大括号内缩进

大括号内的代码块应该统一右移一个缩进单位，表示这些语句（或这个代码块）归属于这个控制语句

> 比如这段语句
> 
> ```cpp
> for (x = 18; true; x += 10) {
>     y = numberDigit(x);
>     z = changeNumber(x);
>     if (z == x * 4)
>     {
>         cout << x;
>         break;
>     }
> }
> ```

> 结构图
> 
> ```cpp
> for (x = 18; true; x += 10)
>   ├── y = numberDigit(x)
>   ├── z = changeNumber(x)
>   └── if (z == x * 4)
>        ├── cout << x
>        └── break
> ```

可以看出来，这些语句之间是存在归属关系的，为了区分，我们把归属于一个控制语句的代码块统一往右移动一个缩进单位，来方便区分

---

## 4 . 空格

在我们的代码中，经常会插入空格，良好的插入空格的习惯不仅能让代码更加整洁，还能在需要插入代码时便于选中  

下面是一般加入空格的地方（为了突出空格，这里用 `_` 下划线来表示需要注意的空格）

```cpp
//首先是在关键字与标识符之间
for_(int i = 0; i < n; i++) {
    //代码
}

while_(true) {
    //代码
}

if_(a == b) {
    //代码
}
```

```cpp
//然后是操作符两边
if (a_>=_b) {}
int a_=_b;
c_=_a_+_b;
b_+=_c;
cout_<<_b_<<_endl;
//一般不在自增或自减符号前加空格
i++;
i--;
```

```cpp
//用来分隔的逗号后一般也加空格，for循环中的分号也是
int a,_b,_c;
for (int i = 0;_i < n;_i++) {}
void function(int a,_int b,_int c) {}
//^注意函数名和后面的括号之间不加空格（调用时也是）
```

```cpp
//左大括号之前也可以加空格
for (int i = 0; i < 0; i++)_{}
if (a > b)_{}
while (ture)_{}
```

---

## 5 . 空行

在我们的代码中，也经常使用空行，这是为了区分同一个缩进等级中不同代码块的作用，比如说(使用长横线表示空行)

> 示例（这里是之前写的一个猜数字小游戏）
> 
> ```cpp
> #include <iostream>
> #include <random>
> #include <ctime>
> ———————————————————————————————————————————这里用来分隔包含头文件和命名空间
> using namespace std;
> ———————————————————————————————————————————————————这里用来分隔函数主体部分
> int main() {
> 	//设置随机数种子
> 	srand(time(NULL));
> ————————————————————————————————————————————————————————————分隔预处理部分	
> 	//变量声明部分
> 	int GuessNum;					//要猜的数
> 	int InputNum;					//输入的数
> 	int InputEachNum[4];			//用来保存输入的数的四个位，这句的意思是 声明一个整型数组，有[4]个数，注意调用下标为 0~3，调用InputEachNum[4]时会越界报错
> 	int EachNum[4];					//用来保存要猜的数的各个位
> 	bool bEachNum[4];				//用来保存要猜的数的各个状态
> 	int RightNumCount = 0;			//用来保存正确的个数
> 	int RightPlaceNumCount = 0;		//用来保存正确且位置正确的数的个数
> ——————————————————————————————————————————————————————————分隔变量声明部分
> 	memset(InputEachNum, 0, sizeof(InputEachNum));	//用于初始化数组为0，这句的格式为，memset(填充开始位置，填充的内容，填充的长度)
> 	memset(EachNum, 0, sizeof(EachNum));			//意思是从EachNum开始（数组名称不带下标时表示的是数组开始的地址），填充0，长度为EachNum的长度
> ————————————————————————————————————————————————————————————————初始化部分
> 	//生成随机数并输出
> 	GuessNum = rand() % 8000 + 1000;
> 	cout << GuessNum << endl;
> 	//输入
> 	cin >> InputNum;
> ——————————————————————————————————————————————————————————————————交互部分
> 	//把GuessNum拆到各个位
> 	int i = 0;
> 	while (GuessNum) {
> 		EachNum[i++] = GuessNum % 10;
> 		GuessNum /= 10;
> 	}
> 
> 	//把InputNum拆到各个位
> 	i = 0;
> 	while (InputNum) {
> 		InputEachNum[i++] = InputNum % 10;
> 		InputNum /= 10;
> 	}
> 
> 	//初始化状态保存数组
> 	for (i = 0; i < 4; i++)
> 		bEachNum[i] = false;
> 
> 	//对比每一位，统计相同的个数
> 	for (i = 0; i < 4; i++)
> 		if (EachNum[i] == InputEachNum[i])
> 			RightPlaceNumCount++;
> 
> 	//遍历输入的数的每一位
> 	for (i = 0; i < 4; i++) {
> 		//将输入的数的每一位和要猜的数的每一位进行对比
> 		for (int j = 0; j < 4; j++) {
> 			//如果两个数相等并且没有被调用过
> 			if (InputEachNum[i] == EachNum[j] && bEachNum[j] != true) {
> 				RightNumCount++;		//统计+1
> 				bEachNum[j] = true;		//把这一位要猜的数标记为调用过
> 				break;	                //跳过这一位输入的数（防止一个输入的数对应多位要猜的数）
> 			}
> 		}
> 	}
> —————————————————————————————————————————————————————————————————游戏部分
> 	//输出
> 	cout << RightNumCount << endl << RightPlaceNumCount << endl;
> —————————————————————————————————————————————————————————————————结束程序
> 	return 0;
> }
> ```

合理的空行能使程序看上去更加清晰明了，便于调试程序

---

## 结语

希望同学们能正确的在程序中使用缩进，养成良好的书写习惯



                                                             ——[Hai-M-Feng](https://github.com/Hai-M-Feng)

                                             `https://github.com/Hai-M-Feng`
